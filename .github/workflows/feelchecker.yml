# .github/workflows/feelchecker.yml
name: feelchecker

on:
  workflow_dispatch:  # 手動実行のみ。定期実行やpushトリガーは適宜変更可

jobs:
  run:
    runs-on: [self-hosted, linux]  # EC2ランナーにマッチさせる（タグは自分の設定に応じて）
    steps:
      - name: リポジトリをチェックアウト
        uses: actions/checkout@v4

      - name: Python依存パッケージ（必要なら）
        run: pip3 install --user playwright httpx beautifulsoup4

      - name: feelchecker.py を実行
        env:
          FEEL_USER: ${{ secrets.FEEL_USER }}
          FEEL_PASS: ${{ secrets.FEEL_PASS }}
          SHEET_CSV: ${{ secrets.SHEET_CSV }}
          CH_ACCESS: ${{ secrets.CH_ACCESS }}
          DEBUG: "1"   # デバッグなら1、本番運用時は0
        run: python3 feelchecker.py
